\documentclass{article}


% Packages
\usepackage{geometry}
\usepackage[bottom]{footmisc}
\usepackage{caption}
\usepackage{dot2texi}
\usepackage{enumitem}
\usepackage{fancyvrb}
\usepackage{fontspec}
\usepackage{footnotebackref}
\usepackage{fvextra}
\usepackage{graphviz}
\usepackage{hyperref}
\usepackage{listings}
\usepackage{longtable}
\usepackage{mdframed}
\usepackage{newunicodechar}
\usepackage{parskip}
\usepackage{pifont}
\usepackage{tikz}
\usepackage{titlesec}
\usepackage{twemojis}
\usepackage{upquote}
\usepackage{xcolor}
\usepackage{zref-abspage}
\usepackage{framed}

% Enable div parsing
\usepackage{etoolbox}
\AtBeginEnvironment{recommendation}{\par\addvspace{\topskip}}
\AtEndEnvironment{recommendation}{\par\addvspace{\topskip}}


% Document setup
\setcounter{secnumdepth}{7}
\setcounter{tocdepth}{7}

% TikZ setup
\usetikzlibrary{shapes,arrows}
\setmonofont{JetBrains Mono}
\newunicodechar{âœ”}{\ding{51}}

% Title spacing
\titlespacing*{\section}{0pt}{12pt}{12pt}
\titlespacing*{\subsection}{0pt}{12pt}{12pt}
\titlespacing*{\subsubsection}{0pt}{12pt}{12pt}
\titlespacing*{\paragraph}{0pt}{12pt}{12pt}
\titlespacing*{\subparagraph}{0pt}{12pt}{12pt}

% Colors
\definecolor{lightbackground}{HTML}{edf6ff}
\definecolor{darkbackground}{HTML}{189cff}
\definecolor{codecolor}{HTML}{0d6ea4}
\definecolor{linenumbercolor}{HTML}{6aaae4}
\definecolor{linkcolor}{HTML}{07406E}
\definecolor{quotebackground}{HTML}{f2f9ff}

% Code highlighting setup
\makeatletter
\DefineVerbatimEnvironment{Highlighting}{Verbatim}{
    commandchars=\\\{\},
    breaklines=true,
    breakanywhere=true,
    numbers=left,
    numbersep=5pt,
    frame=none,
    xleftmargin=2em,
    formatcom=\color{codecolor}     
}
\renewcommand{\theFancyVerbLine}{\textcolor{linenumbercolor}{\footnotesize\arabic{FancyVerbLine}}}
\addtolength{\topsep}{2em}
\makeatother

% Hyperref setup
\urlstyle{same}  % Use the same font as the rest of the text
\hypersetup{
    colorlinks=true,
    linkcolor=linkcolor,
    filecolor=linkcolor,
    urlcolor=linkcolor,
    citecolor=linkcolor,
    allbordercolors=linkcolor
}
\let\oldhref\href
\renewcommand{\href}[2]{\oldhref{#1}{\rmfamily\textcolor{linkcolor}{\textbf{#2}}}}

% Quote environment
\newenvironment{myquote}{%
  \vspace{16pt}%
  \begin{mdframed}[backgroundcolor=quotebackground,leftmargin=0.5cm,linewidth=4pt,leftline=true,rightline=false,topline=false,bottomline=false,linecolor=darkbackground]%
  \bfseries}
{\end{mdframed}\vspace{16pt}}
\renewenvironment{quote}{\begin{myquote}}{\end{myquote}}


% List setup
\setlistdepth{7}
\renewlist{itemize}{itemize}{7}
\setlist[itemize,1]{label=\textbullet}
\setlist[itemize,2]{label=\normalfont\bfseries\textendash}
\setlist[itemize,3]{label=\textasteriskcentered}
\setlist[itemize,4]{label=\textperiodcentered}
\setlist[itemize,5]{label=\textendash}
\setlist[itemize,6]{label=\textbullet}
\setlist[itemize,7]{label=\textasteriskcentered}

\makeatletter
\renewcommand{\labelitemi}{---}
\AtBeginDocument{
    \setlist[itemize,enumerate]{
        topsep=0.5em,    % Space before and after the list
    }
}
\providecommand{\tightlist}{
  \setlength{\itemsep}{0.25em}   % Space between items
  \setlength{\parskip}{0.25em}   % Paragraph spacing within items
}
\makeatother

% Emoji setup
\directlua{luaotfload.add_fallback
  ("emojifallback",
    {
      "NotoColorEmoji:mode=harf;"
    }
  )}

\setmainfont{Latin Modern Roman}[
  RawFeature={fallback=emojifallback}
]

% Pandoc syntax highlighting tokens
\newcommand{\AlertTok}[1]{\textcolor[rgb]{1.00,0.00,0.00}{\textbf{#1}}}
\newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{#1}}}}
\newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.49,0.56,0.16}{#1}}
\newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{#1}}
\newcommand{\BuiltInTok}[1]{#1}
\newcommand{\CharTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{#1}}
\newcommand{\CommentTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textit{#1}}}
\newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{#1}}}}
\newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.53,0.00,0.00}{#1}}
\newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{\textbf{#1}}}
\newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.56,0.13,0.00}{#1}}
\newcommand{\DecValTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{#1}}
\newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.73,0.13,0.13}{\textit{#1}}}
\newcommand{\ErrorTok}[1]{\textcolor[rgb]{1.00,0.00,0.00}{\textbf{#1}}}
\newcommand{\ExtensionTok}[1]{#1}
\newcommand{\FloatTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{#1}}
\newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.02,0.16,0.49}{#1}}
\newcommand{\ImportTok}[1]{#1}
\newcommand{\InformationTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{#1}}}}
\newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{\textbf{#1}}}
\newcommand{\NormalTok}[1]{#1}
\newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.40,0.40,0.40}{#1}}
\newcommand{\OtherTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{#1}}
\newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.74,0.48,0.00}{#1}}
\newcommand{\RegionMarkerTok}[1]{#1}
\newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{#1}}
\newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.73,0.40,0.53}{#1}}
\newcommand{\StringTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{#1}}
\newcommand{\VariableTok}[1]{\textcolor[rgb]{0.10,0.09,0.49}{#1}}
\newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{#1}}
\newcommand{\WarningTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{#1}}}}

% Define Shaded environment for code blocks
\definecolor{shadecolor}{HTML}{ffffff}
\newenvironment{Shaded}
{\begin{snugshade}}
{\end{snugshade}}

% Assets Folder
\newcommand{\assetpath}{assets}
\graphicspath{{\assetpath/}}

% START RECOMMENDATION
% Custom environments
\usepackage{environ}
\usepackage{xstring}

% Colors for recommendation box
\definecolor{recommendationborder}{HTML}{666666}
\definecolor{recommendationbg}{HTML}{ffffff}

% Lightbulb icon definition
\newcommand{\lightbulbicon}{%
  {\fontsize{20}{24}\selectfont\textcolor{recommendationborder}{ðŸ’¡}}%
}

% Create the recommendation environment
\newenvironment{recommendation}
  {%
    \par\addvspace{\baselineskip}%
    \begin{mdframed}[
      backgroundcolor=recommendationbg,
      leftmargin=0cm,
      rightmargin=1cm,
      linewidth=0pt,
      linecolor=recommendationborder,
      topline=true,
      bottomline=true,
      rightline=true,
      leftline=true,
      roundcorner=5pt,
      innertopmargin=0.5em,
      innerbottommargin=0.5em
    ]%
    \begin{minipage}[t]{0.07\textwidth}%
      \vspace{0pt}%
      \lightbulbicon%
    \end{minipage}%
    \hspace{0.5cm}% 
    \begin{minipage}[t]{0.91\textwidth}%
      \vspace{0pt}%
      \textbf{\color{recommendationborder}Recommendation}%
      \par\vspace{0.3em}%
  }
  {%
    \end{minipage}%
    \end{mdframed}%
    \par\addvspace{\baselineskip}%
  }
% END RECOMMENDATION


% Setup Subtitle
\providecommand{\subtitle}[1]{% 
\usepackage{titling}
\posttitle{%
\par\large#1\end{center}}
}

% Setup Frontmatter
\title{\huge $title$}
$if(subtitle)$
\subtitle{$subtitle$}
$endif$
\author{$author$\vspace{-1em}}
\date{$date$}


% Footnote spacing configuration
\setlength{\footnotesep}{20pt}        % Space between footnotes
\addtolength{\skip\footins}{10pt}     % Space between text and footnote area

% Document start
\begin{document}
\maketitle
\tableofcontents
\clearpage

$body$

\end{document}